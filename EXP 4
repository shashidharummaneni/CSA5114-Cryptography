#include <stdio.h>
#include <ctype.h>
#include <string.h>

// Function to encrypt plaintext using Vigen√®re cipher
void vigenereEncrypt(char *plaintext, char *key, char *ciphertext) {
    int keyLen = strlen(key);
    int keyIndex = 0;

    for (int i = 0; plaintext[i] != '\0'; i++) {
        char ch = plaintext[i];
        if (isalpha(ch)) {
            int isLower = islower(ch);
            ch = toupper(ch);
            char keyChar = toupper(key[keyIndex % keyLen]);
            int shift = keyChar - 'A';

            ch = ((ch - 'A' + shift) % 26) + 'A';
            ciphertext[i] = isLower ? tolower(ch) : ch;

            keyIndex++; // Only increment key index on alphabetic characters
        } else {
            ciphertext[i] = ch; // Non-alphabetic characters unchanged
        }
    }
    ciphertext[strlen(plaintext)] = '\0'; // Null-terminate
}

int main() {
    char plaintext[200], key[100], ciphertext[200];

    printf("Enter plaintext: ");
    fgets(plaintext, sizeof(plaintext), stdin);

    printf("Enter keyword: ");
    scanf("%s", key);

    // Ensure keyword contains only letters
    for (int i = 0; key[i]; i++) {
        if (!isalpha(key[i])) {
            printf("Keyword must only contain alphabetic characters.\n");
            return 1;
        }
    }

    vigenereEncrypt(plaintext, key, ciphertext);

    printf("\nEncrypted Ciphertext: %s\n", ciphertext);

    return 0;
}
